---
title: 'DNS 쿼리 실패 우편물 종류: Exchange 2013 Help'
TOCTitle: DNS 쿼리 실패 우편물 종류
ms:assetid: a3c3980c-20ca-4b54-a2e6-76d49af620b4
ms:mtpsurl: https://technet.microsoft.com/ko-kr/library/Bb676467(v=EXCHG.150)
ms:contentKeyID: 52058110
ms.date: 05/22/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# DNS 쿼리 실패 우편물 종류

 

_**적용 대상:**Exchange Server 2013_

_**마지막으로 수정된 항목:**2014-12-02_

Microsoft Exchange Server 2013에서는 대상 도메인에 대해 DNS 오류가 발생한 경우 메시지를 약간 더 빨리 배달하기 위해 DNS 쿼리 민감도를 조정할 수 있습니다. 그러나 DNS 오류에 따라서는 특정 환경에서 이 조정으로 인해 배달 실패가 발생할 수 있습니다.

## DNS 쿼리 및 원격 메시지 배달

외부 받는 사람에게 메시지를 배달하는 Exchange 서버는 외부 받는 사람에 대한 메일을 수락하는 대상 메시징 서버를 찾을 수 있어야 합니다. 대상에 따라 메시지는 원격 받는 사람에 대한 배달을 대기하는 동안 하나 이상의 원격 배달 큐에 추가됩니다. 배달 큐에 대한 자세한 내용은 [큐](queues-exchange-2013-help.md)를 참조하십시오.

Exchange 서버는 메시지를 배달하는 데 필요한 DNS 레코드를 찾기 위해 구성된 DNS 서버를 쿼리합니다. DNS 서버는 나열된 순서대로 쿼리됩니다. DNS 서버 중 하나를 사용할 수 없는 경우 쿼리는 목록의 다음 DNS 서버로 이동합니다. DNS 서버에서는 다음 정보가 쿼리됩니다.

  - **외부 받는 사람의 도메인 부분에 대한 MX(메일 교환) 레코드**   MX 레코드에는 도메인에 대한 메시지를 수락하는 역할을 수행하는 메시징 서버의 FQDN(정규화된 도메인 이름)과 해당 메시징 서버에 대한 기본 설정 값이 포함되어 있습니다. 더 작은 기본 설정 값이 기본 설정 메시징 서버를 나타냅니다. 도메인에 둘 이상의 MX 레코드가 있는 경우 기본 설정 값이 중요합니다. 내결함성을 최적화하기 위해 대부분의 조직은 여러 메시징 서버 및 다른 기본 설정 값을 가진 여러 MX 레코드를 사용합니다.

  - **대상 메시징 서버의 A(주소) 레코드**   MX 레코드에서 사용되는 모든 메시징 서버는 해당 A 레코드가 있어야 합니다. A 레코드는 대상 메시징 서버의 IP 주소를 찾는 데 사용됩니다. 구독된 Edge 전송 서버는 IP 주소를 사용하여 대상 메시징 서버와의 SMTP 연결을 엽니다. MX 레코드에서 CNAME(정식 이름) 레코드의 FQDN을 사용하는 것이 기술적으로 가능하지만 이 방법은 RFC 974, RFC 1034, RFC 1912 및 RFC 2181을 위반하므로 대부분의 메시징 서버에서 지원되지 않습니다.
    
    MX 레코드에 있는 메시징 서버의 FQDN을 IP 주소로 확인하기 위해 루트 DNS 서버에서 시작하는 반복 DNS 쿼리 및 재귀 DNS 쿼리의 필수 조합이 사용됩니다.

Exchange 2013에서는 구성할 수 없는 DNS 쿼리 제한이 있습니다(각 DNS 서버에 대해서는 5초, 전체 DNS 쿼리에 대해서는 1분).

## 잠재적 DNS 문제

Exchange 서버에 대한 DNS 설정이 올바르게 구성된 경우에도 여전히 특정 도메인의 DNS 레코드에 대한 문제가 발생하거나 특정 도메인의 신뢰할 수 있는 DNS 서버를 찾는 데 사용되는 DNS 서버에 문제가 발생할 수 있습니다. 일반적으로 이러한 문제는 사용자가 제어할 수 있는 범위를 벗어나며 해당 DNS 서버를 소유하는 당사자가 해결해야 합니다. 이러한 DNS 관련 오류는 다음과 같은 조건이 하나 이상 존재할 경우 발생할 수 있습니다.

  - 대상 도메인에 대한 잘못된 DNS 레코드

  - DNS 서버 사용률에 대한 문제

  - DNS 서버 복제에 대한 문제

Exchange 2013에서는 DNS 쿼리에서 오류가 발생할 경우 다음 DNS 서버가 현재 쿼리에 대해 이미 오류를 반환하지 않은 경우에만 다음 DNS 서버를 계속 쿼리합니다.

`%ExchangeInstallPath%bin\EdgeTransport.exe.config` XML 응용 프로그램 구성 파일을 수정하여 DNS 쿼리 오류 민감도를 제어할 수 있습니다. 이 파일은 Microsoft Exchange Transport Service와 연결되어 있습니다. 이 파일에 저장하는 변경 내용은 Microsoft Exchange Transport Service를 다시 시작하고 나면 적용됩니다. 이 서비스를 다시 시작하면 서버의 메일 흐름이 일시적으로 중지됩니다. DNS 쿼리 오류 민감도는 EdgeTransport.exe.config 파일의 *DnsFaultTolerance* 키에 의해 제어됩니다. 이 키는 다음 값을 사용합니다.

  - **Lenient**   DNS 쿼리는 유효한 MX 레코드 및 유효하지 않은 MX 레코드의 조합이 있을 경우 DNS 쿼리 시간 제한 값인 1분에 도달할 때까지 계속됩니다. 유효하지 않은 MX 레코드는 무시되며 최저 기본 설정 값을 가진 유효한 MX 레코드가 대상 메시징 서버에 메시지를 배달하는 데 사용됩니다. 이 값은 기본값입니다.

  - **Normal**   DNS 쿼리는 유효하지 않은 MX 레코드가 처음 발생할 경우 유효하지 않은 MX 레코드보다 크기가 크거나 같은 기본 설정 값을 가진 모든 확인된 MX 레코드를 즉시 무시합니다. 최하위 기본 설정 값을 가진 나머지 MX 레코드는 전체 DNS 쿼리가 시간 초과될 때까지 기다리지 않고 메시지를 대상 메시징 서버에 배달하는 데 사용됩니다. 이 작업으로 인해 메시지 배달이 빨라질 수 있지만 다음 조건에 해당할 경우 DNS 쿼리에 유효한 MX 레코드가 존재하지 않을 수도 있다는 잠재적 문제가 있습니다.
    
      - 유효하지 않은 MX 레코드가 대상 도메인에 대한 첫 번째 MX 레코드입니다.
    
      - 유효한 MX 레코드가 유효하지 않은 MX 레코드와 우선 순위 값이 같습니다.

`Normal` 모드 및 `Lenient` 모드 모두에서 유효하지 않은 MX 레코드에 대한 DNS 쿼리의 결과는 캐시되지 않습니다. DNS 쿼리는 다음 번에 실행될 때 대상 도메인에 대한 MX 레코드 확인을 시도합니다.


> [!NOTE]
> Exchange XML 응용 프로그램 구성 파일(예: 클라이언트 액세스 서버의 web.config 파일 또는 사서함 서버의 EdgeTransport.exe.config 파일)에 설정하는 사용자 지정된 모든 서버 단위 설정은 Exchange CU(누적 업데이트)를 설치하면 덮어쓰게 됩니다. 설치 후 서버를 쉽게 다시 구성할 수 있도록 이 정보를 저장했는지 확인하세요. 이러한 설정은 Exchange CU를 설치한 후에 다시 구성해야 합니다.


