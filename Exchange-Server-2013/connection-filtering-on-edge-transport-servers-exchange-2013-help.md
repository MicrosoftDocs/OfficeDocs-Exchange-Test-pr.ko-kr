---
title: 'Edge 전송 서버에서 연결 필터링: Exchange 2013 Help'
TOCTitle: Edge 전송 서버에서 연결 필터링
ms:assetid: b513755c-5d3e-44fa-a6cb-771d48b544ac
ms:mtpsurl: https://technet.microsoft.com/ko-kr/library/Bb124320(v=EXCHG.150)
ms:contentKeyID: 60829915
ms.date: 05/22/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# Edge 전송 서버에서 연결 필터링

 

_**적용 대상:**Exchange Server 2013_

_**마지막으로 수정된 항목:**2015-03-09_

콘텐츠 필터링은 전자 메일 원본에 따라 전자 메일을 허용하거나 차단하는 Microsoft Exchange Server 2013의 스팸 방지 기능입니다. 연결 필터링은 Edge 전송 서버에서만 사용 가능한 연결 필터링 에이전트를 통해 수행됩니다. 연결 필터링 에이전트는 연결하는 메일 서버의 IP 주소에 따라 인바운드 메시지에 대해 수행할 작업(있는 경우)을 결정합니다.

기본적으로 연결 필터링 에이전트는 Edge 전송 서버에서 인바운드 메시지를 평가하는 첫 번째 스팸 방지 에이전트입니다. 허용 및 차단된 IP 주소에 SMTP 연결의 원본 IP 주소가 있는지 확인하는 작업이 수행됩니다. 원본 IP 주소가 특별히 허용된 경우에는 다른 스팸 방지 에이전트의 추가 처리 없이 조직의 받는 사람에게 메시지가 전송됩니다. 원본 IP 주소가 특별히 차단된 경우에는 SMTP 연결이 끊어집니다. 원본 IP 주소가 특별히 허용되거나 차단되지 않은 경우에는 Edge 전송 서버의 다른 스팸 방지 에이전트로 메시지가 전달됩니다.

연결 필터링은 원본 메일 서버의 IP 주소를 IP 허용 목록, IP 차단 목록, IP 허용 목록 공급자 및 IP 차단 목록 공급자의 값과 비교합니다. 연결 필터링이 작동하려면 이 네 가지 IP 주소 데이터 저장소 중 하나 이상을 구성해야 합니다. IP 주소 데이터를 지정하지 않은 경우 연결 필터링 에이전트를 사용하지 않도록 설정해야 합니다. 자세한 내용은 [Edge 전송 서버에서 연결 필터링 관리](manage-connection-filtering-on-edge-transport-servers-exchange-2013-help.md)를 참조하세요.

**목차**

IP Block list

IP Allow list

IP Block List providers

IP Allow List providers

Test IP Block List providers and IP Allow List providers

Configure connection filtering on Edge Transport servers that aren't directly connected to the Internet

## IP 차단 목록

IP 차단 목록에는 차단할 전자 메일 서버의 IP 주소가 포함됩니다. IP 차단 목록의 IP 주소는 수동으로 유지 관리합니다. 개별 IP 주소 또는 IP 주소 범위를 추가할 수 있습니다. IP 주소 항목이 차단되는 기간을 지정하는 만료 시간을 지정할 수 있습니다. 만료 시간에 도달하면 IP 차단 목록의 IP 주소 항목이 해제됩니다.

연결 필터링 에이전트가 IP 차단 목록에서 원본 IP 주소를 찾은 경우에는 메시지의 모든 **RCPT TO** 헤더(봉투 받는 사람)가 처리된 후 SMTP 연결이 끊어집니다.

프로토콜 분석 에이전트의 보낸 사람 신뢰도 기능을 사용하여 IP 차단 목록에 IP 주소를 자동으로 추가할 수도 있습니다. 자세한 내용은 [보낸사람 신뢰도 및 프로토콜 분석 에이전트](sender-reputation-and-the-protocol-analysis-agent-exchange-2013-help.md)를 참조하세요.

## IP 허용 목록

IP 허용 목록에는 신뢰할 수 있는 전자 메일 원본으로 지정할 전자 메일 서버의 IP 주소가 포함됩니다. IP 허용 목록에 지정한 메일 서버의 전자 메일은 다른 Exchange 스팸 방지 에이전트의 처리 대상에서 제외됩니다.

IP 허용 목록의 IP 주소는 수동으로 유지 관리합니다. 개별 IP 주소 또는 IP 주소 범위를 추가할 수 있습니다. IP 주소 항목이 허용되는 기간을 지정하는 만료 시간을 지정할 수 있습니다. 만료 시간에 도달하면 IP 허용 목록의 항목이 해제됩니다.

맨 위로 이동

## IP 차단 목록 공급자

IP 차단 목록 공급자를 보통 *실시간 차단 목록* 또는 RBL이라고 합니다. IP 차단 목록 공급자는 스팸을 보낸 메일 서버 IP 주소 목록을 컴파일합니다. 또한 대부분의 IP 차단 목록 공급자는 스팸에 사용되었을 수 있는 메일 서버 IP 주소 목록도 컴파일합니다. 예를 들어 오픈 릴레이, 동적 IP 주소를 할당하는 ISP(인터넷 서비스 공급자) 및 전화 접속 계정의 SMTP 메일 서버 트래픽을 허용하는 ISP에 대해 구성된 메일 서버가 여기에 포함됩니다.

IP 차단 목록 공급자를 사용하도록 연결 필터링을 구성하면 연결 필터링 에이전트가 연결 메일 서버의 IP 주소를 IP 차단 목록 공급자의 IP 주소 목록과 비교합니다. 일치하는 경우 이 메시지는 조직에서 허용되지 않습니다. 여러 IP 차단 목록 공급자를 사용하도록 연결 필터링을 구성하고 각 공급자에 서로 다른 우선 순위 값을 할당할 수 있습니다.

연결 필터링 에이전트는 IP 허용 목록과 IP 차단 목록에서 원본 IP 주소를 확인합니다. 이 두 목록 중 하나에 IP 주소가 없는 경우 연결 필터링 에이전트는 지정한 우선 순위 값에 따라 IP 차단 목록 공급자를 쿼리합니다. IP 주소가 IP 차단 목록 공급자에 정의되어 있으면 Edge 전송 서버가 대기한 후 **RCPT TO** 헤더를 처리하고, 보내는 메일 서버에 `SMTP 550` 오류로 응답한 후 연결을 끊습니다. 연결이 즉시 끊어지지는 않습니다. 이는 연결 시도가 로깅될 수 있도록 하기 위한 것이며, 사용자가 IP 차단 목록 공급자의 메시지 차단 대상에서 제외되는 받는 사람을 지정할 수 있기 때문입니다.

IP 차단 목록 공급자에 IP 주소가 정의되지 않은 경우 연결 필터링 에이전트는 이 메시지를 Edge 전송 서버의 다음 전송 에이전트로 전달합니다.

각 IP 차단 목록 공급자에 대해 메시지가 차단된 경우 보낸 사람에게 반환되는 `SMTP 550` 오류를 사용자 지정할 수 있습니다. 메시지 원본을 스팸으로 식별한 IP 차단 목록 공급자를 확인해야 합니다. 합법적인 원본 메일 서버가 스팸 원본으로 잘못 식별된 경우 관리자는 IP 차단 목록 공급자에 연락하여 IP 차단 목록 공급자에서 메일 서버를 제거하는 데 필요한 조치를 취할 수 있습니다.

IP 차단 목록 공급자는 IP 주소가 목록에 정의된 이유를 나타내는 다른 코드를 반환할 수 있습니다. 대부분의 IP 차단 목록 공급자는 비트 마스크 또는 절대값 데이터 형식을 반환합니다. 이러한 데이터 형식 내에서 IP 차단 목록 공급자는 여러 값을 사용하여 위협 유형별로 IP 주소를 분류할 수 있습니다.

IP 차단 목록 공급자를 사용할 때 고려할 사항이 있습니다.

  - IP 차단 목록 공급자 서비스의 중단 또는 지연은 Edge 전송 서버의 메시지 처리를 지연시킬 수 있습니다. 따라서 항상 안정적인 IP 차단 목록 공급자를 선택해야 합니다.

  - 합법적인 것으로 알고 있는 원본 서버가 스팸 원본으로 잘못 식별될 수 있습니다. 예를 들어 메일 서버가 실수로 오픈 릴레이 역할을 하도록 구성될 수 있습니다. 따라서 항상 명확한 평가 및 제거 절차를 제공하는 IP 차단 목록 공급자를 선택해야 합니다.

맨 위로 이동

## 비트 마스크 및 절대값 예

이 섹션에서는 대부분의 차단 목록 공급자가 반환하는 상태 코드의 예를 보여 줍니다. 공급자가 반환하는 상태 코드에 대한 자세한 내용은 해당 공급자의 설명서를 참조하십시오.

비트 마스크 데이터 형식의 경우 IP 차단 목록 공급자 서비스는 상태 코드인 127.0.0.*x*를 반환합니다. 여기서 정수 *x*는 다음 표에 나와 있는 값 중 하나입니다.

### 비트 마스크 데이터 형식의 값 및 상태 코드

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>값</th>
<th>상태 코드</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>1</p></td>
<td><p>IP 주소가 IP 차단 목록에 있습니다.</p></td>
</tr>
<tr class="even">
<td><p>2</p></td>
<td><p>SMTP 서버가 오픈 릴레이 역할을 하도록 구성되어 있습니다.</p></td>
</tr>
<tr class="odd">
<td><p>4</p></td>
<td><p>IP 주소가 전화 접속 IP 주소를 지원합니다.</p></td>
</tr>
</tbody>
</table>


절대값 형식의 경우 IP 차단 목록 공급자는 IP 주소가 차단 목록에 정의된 이유를 나타내는 명시적인 응답을 반환합니다. 다음 표에서는 절대값과 명시적 응답의 예를 보여 줍니다.

### 절대값 데이터 형식에 대한 값 및 상태 코드

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>값</th>
<th>명시적 응답</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>127.0.0.2</p></td>
<td><p>이 IP 주소는 직접 스팸 출처입니다.</p></td>
</tr>
<tr class="even">
<td><p>127.0.0.4</p></td>
<td><p>이 IP 주소는 벌크 메일 발송 주소입니다.</p></td>
</tr>
<tr class="odd">
<td><p>127.0.0.5</p></td>
<td><p>메시지를 전송하는 원격 서버는 다단계 오픈 릴레이를 지원하는 것으로 알려져 있습니다.</p></td>
</tr>
</tbody>
</table>


맨 위로 이동

## IP 허용 목록 공급자

IP 허용 목록 공급자를 *수신 허용 목록* 또는 *허용 목록*이라고도 합니다. IP 허용 목록 공급자는 IP 차단 목록 공급자와 동일한 방식으로 구성되지만 결과는 정반대입니다. 즉, 스팸 활동과 명확히 관련이 없는 메일 서버 IP 주소를 정의합니다. 연결하는 메일 서버의 IP 주소가 IP 허용 목록 공급자에 정의된 경우 이 메시지는 다른 Exchange 스팸 방지 에이전트에 의해 처리되지 않습니다. 따라서 IP 허용 목록 공급자보다 IP 차단 목록 공급자가 훨씬 자주 사용됩니다. IP 허용 목록 공급자는 신중하게 선택해야 합니다.

맨 위로 이동

## IP 차단 목록 공급자 및 IP 허용 목록 공급자 테스트

IP 차단 목록 공급자 또는 IP 허용 목록 공급자를 사용하도록 연결 필터링을 구성한 후에는 테스트를 실행하여 해당 공급자가 올바르게 작동하는지 확인할 수 있습니다. 대부분의 공급자는 해당 서비스를 테스트하는 데 사용할 수 있는 테스트 IP 주소를 제공합니다. 공급자를 테스트할 때 연결 필터링 에이전트는 해당 공급자의 특정 응답으로 지정되는 DNS 쿼리를 실행합니다. IP 차단 목록 공급자 서비스 또는 IP 허용 목록 공급자 서비스의 IP 주소를 테스트하는 방법에 대한 자세한 내용은 [Edge 전송 서버에서 연결 필터링 관리](manage-connection-filtering-on-edge-transport-servers-exchange-2013-help.md)를 참조하세요.

맨 위로 이동

## 인터넷에 직접 연결되지 않은 Edge 전송 서버에서 연결 필터링 구성

인터넷을 통해 직접 전자 메일을 받지 않는 Edge 전송 서버에서 연결 필터링을 사용할 수 있습니다. 이러한 경우 Edge 전송 서버는 인터넷을 통해 직접 메시지를 받고 처리하는 다른 메일 서버 뒤에 있습니다. 예를 들어 조직에서는 메시지가 Edge 전송 서버에 도달하기 전에 스팸 방지 서버, 서비스 또는 어플라이언스를 통해 전자 메일 트래픽을 보낼 수 있습니다. 이 경우 연결 필터링 에이전트는 메시지에서 올바른 원본 IP 주소를 추출해야 합니다. 이렇게 하려면 연결 필터링 에이전트가 메시지 헤더에서 **Received** 헤더 필드 값의 구문을 분석한 후 이 값을 Edge 전송 서버와 인터넷 사이에 있는 메일 서버의 알려진 IP 주소와 비교해야 합니다.

SMTP 메시지를 허용하고 배달 경로를 따라 릴레이하는 모든 메일 서버는 메시지 헤더에 자체 **Received** 헤더 필드를 추가합니다. **Received** 헤더에는 일반적으로 메시지를 처리한 메일 서버의 도메인 이름과 IP 주소가 포함됩니다.

Edge 전송 서버가 인터넷을 통해 직접 메시지를 허용하지 않는 경우 Exchange 2013 사서함 서버의 **Set-TransportConfig** cmdlet에서 *InternalSMTPServers* 매개 변수를 사용하여 Edge 전송 서버와 인터넷 사이에 있는 메일 서버의 IP 주소를 식별해야 합니다. IP 주소 데이터는 EdgeSync에 의해 Edge 전송 서버로 복제됩니다. Edge 전송 서버에 메시지가 수신되면 연결 필터링 에이전트는 *InternalSMTPServers* 매개 변수로 지정된 값과 일치하지 않는 **Received** 헤더 필드의 IP 주소가 확인해야 하는 원본 IP 주소인 것으로 가정합니다. 따라서 연결 필터링이 올바르게 작동하려면 모든 내부 SMTP 서버를 지정해야 합니다.

맨 위로 이동

