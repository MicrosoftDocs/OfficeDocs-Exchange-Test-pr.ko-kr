---
title: '전환 및 장애 조치: Exchange 2013 Help'
TOCTitle: 전환 및 장애 조치
ms:assetid: 75388645-cae1-402e-bf02-c4949d3e2c31
ms:mtpsurl: https://technet.microsoft.com/ko-kr/library/Dd298067(v=EXCHG.150)
ms:contentKeyID: 62523789
ms.date: 05/22/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# 전환 및 장애 조치

 

_**적용 대상:** Exchange Server 2013 SP1_

_**마지막으로 수정된 항목:** 2015-12-02_

전환 및 장애 조치(failover)는 Microsoft Exchange Server 2013에서 두 가지 형태의 중단입니다.

  - *전환* 을를 cmdlet에 의해 또는 Exchange 2013의 관리 되는 가용성 시스템에 의해 명시적으로 시작 되는 서버 또는 데이터베이스의 예약 된 중단입니다. 일반적으로 전환 유지 관리 작업을 수행 하기 위한 준비를 완료 합니다. 데이터베이스 가용성 그룹 (DAG)에서 다른 서버로 활성 사서함 데이터베이스 복사본을 이동 포함 하는 전환 합니다. 정상 대상 없는 전환 동안 발견 되 면 관리자가 오류가 발생 및 사서함 데이터베이스 위쪽, 계속 또는 탑재 합니다.

  - *장애 조치* 서비스, 데이터 또는 둘 모두 중단이 발생 하는 예기치 않은 이벤트를 가리킵니다. 장애 조치는 자동으로 활성 사서함 데이터베이스 복사본을 만들 수동 사서함 데이터베이스 복사본을 활성화 하는 오류 로부터 복구 시스템에 포함 됩니다. 장애 조치 시 정상 없는 대상 찾으면 사서함 데이터베이스를 분리 됩니다.

Exchange 2013은 전환 및 장애 조치(failover) 모두를 처리하도록 특수하게 디자인되었습니다.

고가용성 및 사이트 복구와 관련된 관리 작업에 대한 자세한 내용은 [고가용성 및 사이트 복구를 관리합니다.](managing-high-availability-and-site-resilience-exchange-2013-help.md)를 참조하십시오.

## 전환

Exchange 2013에는 세 가지 유형의 전환이 있습니다.

  - 데이터베이스 전환

  - 서버 전환

  - 데이터 센터 전환

## 데이터베이스 전환

*데이터베이스 전환*은 개별 활성 데이터베이스가 다른 데이터베이스 복사본(수동 복사본)으로 전환되는 프로세스이며, 해당 데이터베이스 복사본은 새 활성 데이터베이스 복사본이 됩니다. 데이터베이스 전환은 데이터 센터 내부와 전체에서 발생할 수 있습니다. 데이터베이스 전환은 EMC(Exchange 관리 콘솔) 또는 셸을 사용하여 수행할 수 있습니다. 사용되는 인터페이스에 관계없이 전환 프로세스는 다음과 같습니다.

1.  관리자가 데이터베이스 전환을 시작하여 현재 활성 사서함 데이터베이스 복사본을 다른 서버로 이동합니다.

2.  작업에 사용되는 클라이언트가 DAG 구성원의 Microsoft Exchange 복제 서비스에 대한 RPC 호출을 수행합니다.

3.  DAG 구성원에 PAM(Primary Active Manager) 역할이 없는 경우 DAG 구성원은 PAM 역할을 보유하는 서버에서 해당 작업을 참조하도록 합니다.

4.  작업은 PAM 역할을 보유하는 서버에서 Microsoft Exchange 복제 서비스에 대한 RPC 호출을 수행합니다.

5.  PAM이 DAG의 클러스터 데이터베이스에 저장된 데이터베이스 위치 정보를 읽고 업데이트합니다.

6.  PAM이 수동 모드가 새 활성 사서함 데이터베이스 복사본으로 활성화된 DAG 구성원의 Microsoft Exchange 복제 서비스에 연결합니다.

7.  대상 서버에 있는 Microsoft Exchange 복제 서비스가 다른 모든 DAG 구성원의 Microsoft Exchange 복제 서비스를 쿼리하여 데이터베이스 복사본에 대해 가장 적합한 로그 원본을 결정합니다.

8.  현재 서버에서 데이터베이스가 분리되며 대상 서버의 Microsoft Exchange 복제 서비스를 통해 남은 로그가 대상 서버로 복사됩니다.

9.  대상 서버의 Microsoft Exchange 복제 서비스가 데이터베이스 탑재를 요청합니다.

10. 대상 서버의 Microsoft Exchange 정보 저장소가 로그 파일을 재생하고 데이터베이스를 탑재합니다.

11. 오류 코드가 대상 서버의 Microsoft Exchange 복제 서비스로 반환됩니다.

12. PAM이 DAG의 클러스터 데이터베이스에 데이터베이스 복사본 상태 정보를 업데이트합니다.

13. 오류 코드가 대상 서버의 Microsoft Exchange 복제 서비스에 의해 PAM의 Microsoft Exchange 복제 서비스로 반환됩니다.

14. PAM의 Microsoft Exchange 복제 서비스가 작업을 호출한 관리 인터페이스로 오류를 반환합니다.

15. 원격 PowerShell이 작업 결과를 호출 중인 관리 인터페이스로 반환합니다.

데이터베이스 전환을 수행하는 방법에 대한 자세한 단계는 [사서함 데이터베이스 복사본 활성화](activate-a-mailbox-database-copy-exchange-2013-help.md)를 참조하십시오.

## 서버 전환

서버 전환은 DAG 구성원에 있는 모든 활성 데이터베이스를 하나 이상의 다른 DAG 구성원에서 활성화하는 프로세스입니다. 데이터베이스 전환과 마찬가지로 서버 전환은 데이터 센터 내부와 전체에서 발생할 수 있으며 EAC와 셸을 모두 사용하여 시작할 수 있습니다. 사용되는 인터페이스에 관계없이 서버 전환 프로세스는 다음과 같습니다.

1.  관리자가 서버 전환을 시작하여 현재 활성 사서함 데이터베이스 복사본을 하나 이상의 다른 서버로 이동합니다.

2.  현재 서버의 활성 데이터베이스 각각에 대해 이 항목 이전에 설명한 데이터베이스 전환 단계(2-4단계)와 동일한 작업이 수행됩니다.

3.  PAM이 DAG의 클러스터 데이터베이스에 저장된 데이터베이스 위치 정보를 읽고 업데이트합니다.

4.  PAM이 수동 복사본이 활성화된 각 DAG 구성원의 Microsoft Exchange 복제 서비스에 연결합니다.

5.  대상 서버에 있는 Microsoft Exchange 복제 서비스가 다른 모든 DAG 구성원의 Microsoft Exchange 복제 서비스를 쿼리하여 데이터베이스 복사본에 대해 가장 적합한 로그 원본을 결정합니다.

6.  현재 서버에서 데이터베이스가 분리되며 각 대상 서버의 Microsoft Exchange 복제 서비스를 통해 남은 로그가 대상 서버로 복사됩니다.

7.  각 대상 서버의 Microsoft Exchange 복제 서비스가 데이터베이스 탑재를 요청합니다.

8.  각 대상 서버의 Microsoft Exchange 정보 저장소가 로그 파일을 재생하고 데이터베이스를 탑재합니다.

9.  오류 코드가 대상 서버의 Microsoft Exchange 복제 서비스로 반환됩니다.

10. PAM이 DAG의 클러스터 데이터베이스에 데이터베이스 복사본 상태 정보를 업데이트합니다.

11. 오류 코드가 대상 서버의 Microsoft Exchange 복제 서비스에 의해 PAM의 Microsoft Exchange 복제 서비스로 반환됩니다.

12. PAM의 Microsoft Exchange 복제 서비스가 작업을 호출한 관리 인터페이스로 오류를 반환합니다.

13. 원격 PowerShell이 작업 결과를 호출 중인 관리 인터페이스로 반환합니다.

서버 전환을 수행하는 방법에 대한 자세한 단계는 [서버 전환 수행](perform-a-server-switchover-exchange-2013-help.md)을 참조하십시오.

## 데이터 센터 전환

사이트 복구 구성에서 사이트 수준 장애에 대해 진행되는 자동 복구는 DAG 내에서 발생하여 메시징 시스템이 작동 상태를 유지하도록 합니다. 이 구성에서는 DAG 구성원을 2개의 위치에 배포하고 DAG 미러링 모니터 서버를 세 번째 위치에 배포해야 하므로 적어도 3개의 위치가 필요합니다.

세 개의 위치가 없거나 세 개의 위치가 있지만 데이터 센터 수준 복구 작업을 제어하려는 경우 사이트 수준 장애 시 수동 복구를 위해 DAG를 구성할 수 있습니다. 이러한 경우 *데이터 센터 전환*이라는 프로세스를 수행합니다. 다른 재해 복구 시나리오의 경우와 마찬가지로, 데이터 센터 전환을 사전에 계획하고 준비해 두면 복구 프로세스를 단순화하고 중지 기간을 단축할 수 있습니다.

Exchange 2013에서 서버 역할 통합을 비롯하여 아키텍처가 다양하게 변경되었으므로 Exchange 2013에서의 데이터 센터 전환이 Exchange 2010의 경우보다 훨씬 쉽습니다. 데이터 센터 전환 수행에 대한 자세한 단계는 [데이터 센터 전환](datacenter-switchovers-exchange-2013-help.md)를 참조하세요.

## 장애 조치(failover)

장애 조치(failover)는 데이터베이스, 서버 또는 데이터 센터 수준에서 발생할 수 있는 자동 활성화 프로세스입니다. 개별 데이터베이스(예: 격리된 저장소 손실) 또는 전체 서버(예: 마더보드 오류 또는 전력 손실) 또는 전체 사이트(예: 사이트의 모든 DAG 구성원 손실)에 영향을 미치는 오류에 대한 응답으로 발생합니다.

DAG 및 사서함 데이터베이스 복사본은 데이터 및 데이터에 대한 액세스 권한이 제공되는 서비스의 전체 중복 및 신속한 복구가 제공됩니다. 다음 표에는 다양한 오류에 대한 예상되는 복구 작업이 나와 있습니다. 관리자가 복구를 시작해야 하는 오류도 있고 시스템에서 자동 처리되는 오류도 있습니다.


<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th>설명</th>
<th>자동 활성화</th>
<th>자동 복구 작업</th>
<th>복구 중 상태: 액티브</th>
<th>복구 중 상태: 패시브</th>
<th>복구 작업</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>ESE(Extensible Storage Engine) 데이터베이스 소프트 오류: 데이터베이스를 저장하는 드라이브가 일부 읽기에서 오류를 반환하고 있습니다(예: -1018 오류).</p></td>
<td><p>가능한 짧은 중단</p>
<p>가능한 자동 장애 조치(failover)</p></td>
<td><p>잘못된 페이지의 자동 패치</p></td>
<td><p>수동 전환, 자동 장애 조치(failover) 또는 온라인 복구</p></td>
<td><p>실패</p></td>
<td><p>RAID 다시 작성, 데이터베이스 및 데이터베이스 복사본 복구, 복원 및 복구 실행 후 페이지 패치 또는 복사본에서 페이지 패치</p></td>
<td><p>다른 데이터베이스 소프트 오류 코드가 있을 수 있습니다.</p>
<p>NTFS 파일 시스템 블록 오류는 포함되지 않습니다.</p>
<p>장애 조치(failover) 또는 전환이 수행되면 호스트 서버가 업데이트됩니다.</p></td>
</tr>
<tr class="even">
<td><p>ESE &quot;<em>semi-soft&quot;</em> 데이터베이스 오류: 데이터베이스를 저장하는 드라이브가 일부 쓰기에서 오류를 반환하고 있습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>가능한 드라이브 교체 후 자동 볼륨/디스크 다시 작성</p></td>
<td><p>복구할 수 없는 경우 분리됨</p></td>
<td><p>실패</p></td>
<td><p>RAID를 다시 작성하면 문제가 해결될 수 있습니다.</p>
<p>복사 및 복구, 복원 및 복구 실행 또는 가능한 교체 후 볼륨/디스크 다시 작성</p></td>
<td><p>ESE semi-soft 쓰기 오류는 일부 쓰기에 성공했음을 의미합니다.</p>
<p>NTFS 블록 오류는 포함되지 않습니다.</p></td>
</tr>
<tr class="odd">
<td><p>ESE &quot;semi-soft&quot; 로그 오류: 로그 데이터를 저장하는 드라이브가 일부 읽기 또는 쓰기에서 복구되지 않는 오류를 반환하고 있습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>가능한 드라이브 교체 후 자동 볼륨/디스크 다시 작성</p></td>
<td><p>복구할 수 없는 경우 분리됨</p></td>
<td><p>실패</p></td>
<td><p>RAID를 다시 작성하면 문제가 해결될 수 있습니다.</p>
<p>복사 및 복구, 복원 및 복구 실행 또는 가능한 교체 후 볼륨/디스크 다시 작성</p></td>
<td><p>ESE semi-soft 읽기/쓰기 오류는 일부 읽기/쓰기에 성공했음을 의미합니다.</p>
<p>데이터베이스가 실패하면 로그 데이터 복구 프로세스가 시작하기 전에 자동화된 복구가 발생합니다.</p></td>
</tr>
<tr class="even">
<td><p>ESE 소프트웨어 오류 또는 리소스 소모: ESE가 인스턴스를 종료하는 경우 오류가 발생합니다(예: 이벤트 ID 1022, 검사점 깊이가 너무 깊음).</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>복구할 수 없는 경우 분리됨</p></td>
<td><p>실패</p></td>
<td><p>기본 리소스 문제를 해결합니다.</p></td>
<td><p>이 오류는 다른 경우 표시되는 오류일 수 있습니다.</p></td>
</tr>
<tr class="odd">
<td><p>NTFS 차단 오류: 데이터베이스 또는 로그를 저장하는 드라이브에 NTFS 제어 구조에 대한 읽기 또는 쓰기 오류가 발생합니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>가능한 드라이브 교체 후 볼륨을 완전히 다시 작성</p></td>
<td><p>복구할 수 없는 경우 분리됨</p></td>
<td><p>실패</p></td>
<td><p>RAID를 다시 작성하면 문제가 해결될 수 있습니다. NTFS 유틸리티에서 NTFS 문제를 해결할 수 있습니다. Exchange 복구가 필요할 수 있습니다.</p></td>
<td><p>RAID를 사용 중이 아닐 경우 발생할 가능성이 높아집니다. 활성 로그 볼륨에 영향을 미치면 일부 최신 로그 파일이 손실됩니다.</p>
<p>NTFS 또는 기본 소프트웨어나 하드웨어 스택에 의해 자동으로 수정된 오류는 포함되지 않습니다.</p></td>
</tr>
<tr class="even">
<td><p>데이터베이스 또는 로그 드라이브 오류: 데이터베이스 또는 로그를 저장하는 드라이브에 오류가 완전히 발생하거나 액세스할 수 없습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>드라이브 다시 포맷 또는 교체 후 전체 볼륨 다시 작성</p></td>
<td><p>복구할 수 없는 경우 분리됨</p></td>
<td><p>실패</p></td>
<td><p>드라이브 교체 후 가능한 RAID 다시 작성</p>
<p>드라이브 교체 후 전체 볼륨 다시 작성</p>
<p>볼륨 다시 작성 완료</p></td>
<td><p>해당 없음</p></td>
</tr>
<tr class="odd">
<td><p>데이터베이스 또는 로그 볼륨 오류: NTFS 또는 더 낮은 수준의 볼륨 문제로 인해 볼륨에 오류가 발생합니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>드라이브 다시 포맷 또는 교체</p></td>
<td><p>복구할 수 없는 경우 분리됨</p></td>
<td><p>실패</p></td>
<td><p>드라이브 교체 후 가능한 RAID 다시 작성</p>
<p>드라이브 교체 후 전체 볼륨 다시 작성</p>
<p>볼륨 다시 작성 완료</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="even">
<td><p>데이터베이스 또는 로그 볼륨의 공간 부족: 데이터베이스 또는 로그 파일이 포함된 NTFS 파일 시스템 공간이 부족합니다.</p></td>
<td><p>다른 복사가 비슷한 상태에 있지 않으면 자동 장애 조치(failover)</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>실패</p></td>
<td><p>전체 백업 또는 증분 백업 실행, 수동으로 로그 삭제, 데이터베이스 복사본 다시 시작 또는 실패한 데이터베이스 복사본 복구</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="odd">
<td><p>관리자가 잘못된 데이터베이스를 분리합니다.</p></td>
<td><p>자동 장애 조치(failover)가 관리자에 의해 차단되면 짧은 중단이 됩니다.</p>
<p>자동 장애 조치(failover)가 금지되면 데이터베이스를 탑재할 때까지 중단됩니다.</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>해당 없음</p></td>
<td><p>관리자가 오류를 수정합니다.</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="even">
<td><p>관리자가 잘못된 데이터베이스 복사본을 일시 중단합니다.</p></td>
<td><p>구성 및 영향을 받는 복사본에 따라 자동 복구가 금지될 수 있습니다.</p></td>
<td><p>없음</p></td>
<td><p>해당 없음.</p></td>
<td><p>일시 중단됨</p></td>
<td><p>관리자가 오류를 수정합니다.</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="odd">
<td><p>관리자가 저장소, NTFS 또는 볼륨 유지 관리를 위해 데이터베이스를 분리합니다.</p></td>
<td><p>자동 장애 조치(failover)가 관리자에 의해 차단되면 짧은 중단이 됩니다.</p>
<p>자동 장애 조치(failover)가 관리자가 작업을 완료할 때까지 중단됩니다.</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>해당 없음</p></td>
<td><p>관리자가 작업을 완료합니다.</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="even">
<td><p>관리자가 저장소, NTFS 또는 볼륨 유지 관리를 위해 데이터베이스 복사를 일시 중단합니다.</p></td>
<td><p>구성 및 영향을 받는 복사본에 따라 자동 복구가 금지될 수 있습니다.</p></td>
<td><p>없음</p></td>
<td><p>해당 없음.</p></td>
<td><p>Suspended</p></td>
<td><p>관리자가 작업을 완료합니다.</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="odd">
<td><p>관리자가 오프라인 데이터베이스 유지 관리를 위해 데이터베이스를 분리합니다.</p></td>
<td><p>복구할 때까지 중단됨</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>Suspended</p></td>
<td><p>관리자가 작업을 완료합니다.</p></td>
<td><p>활성 및 수동 데이터베이스 복사본이 갈라집니다.</p>
<p>관리자가 복사를 일시 중단해야 합니다.</p></td>
</tr>
<tr class="even">
<td><p>SAN(저장 영역 네트워크), 디스크 또는 저장소 컨트롤러 오류입니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>하드웨어 복구</p></td>
<td><p>수동 데이터베이스 복사본이 시스템에 오류가 발생한 당시의 상태가 됩니다.</p></td>
</tr>
<tr class="odd">
<td><p>서버 하드웨어 유지 관리입니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단(관리자가 차단하지 않는 경우)</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>작업 완료</p></td>
<td><p>수동 데이터베이스 복사본이 시스템이 종료된 당시의 상태가 됩니다.</p></td>
</tr>
<tr class="even">
<td><p>서버 소프트웨어 유지 관리입니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단(관리자가 차단하지 않는 경우)</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>작업 완료</p></td>
<td><p>수동 데이터베이스 복사본이 시스템이 종료된 당시의 상태가 됩니다.</p></td>
</tr>
<tr class="odd">
<td><p>관리자가 Microsoft Exchange 정보 저장소 서비스를 중지했거나 일지 중지했습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>Microsoft Exchange 정보 저장소 서비스를 다시 시작합니다.</p></td>
<td><p>해당 없음</p></td>
</tr>
<tr class="even">
<td><p>Microsoft Exchange 정보 저장소 서비스가 실패했지만 운영 체제가 실행 중입니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>서비스 제어 관리자가 Microsoft Exchange 정보 저장소 서비스를 다시 시작합니다.</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>Microsoft Exchange 정보 저장소 서비스를 수동 또는 자동으로 다시 시작합니다.</p></td>
<td><p>수동 데이터베이스 복사본이 Microsoft Exchange 정보 서비스에 오류가 발생한 당시의 상태가 됩니다.</p></td>
</tr>
<tr class="odd">
<td><p>부분 Microsoft Exchange 정보 저장소 서비스 오류입니다. Exchange 저장소 중 일부 부분의 작동이 중지되었지만 완전히 실패한 것으로 식별되지는 않습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 가능한 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>탑재되고 부분적으로 작동함</p></td>
<td><p>모두(부분만 작동 가능)</p></td>
<td><p>서버, 운영 체제 또는 Microsoft Exchange 정보 저장소 서비스를 다시 시작합니다.</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="even">
<td><p>서버 오류: 다음 이유 중 하나로 인해 서버에 오류가 발생했습니다.</p>
<ul>
<li><p>전체 정전</p></li>
<li><p>복구되지 않는 프로세서 칩, 마더보드 또는 백플레인 오류</p></li>
<li><p>운영 체제 중지 오류</p></li>
<li><p>운영 체제의 응답 중지</p></li>
<li><p>전체 통신 오류</p></li>
</ul></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>컴퓨터 다시 시작</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>전원 복원, 운영 체제 설정 변경, 하드웨어 설정 변경, 하드웨어 교체, 운영 체제 다시 시작, 운영 체제 수리, 하드웨어 수리 또는 통신 문제 복구</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="odd">
<td><p>DAG에 쿼럼 오류가 발생했습니다.</p></td>
<td><p>복구할 때까지 중단됨</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>오류가 발생한 쿼럼 복구, 새 쿼럼 할당 또는 쿼럼 오류를 일으키는 네트워크 복원</p></td>
<td><p>수동 데이터베이스 복사본이 시스템에 오류가 발생한 당시의 상태가 됩니다.</p></td>
</tr>
<tr class="even">
<td><p>MAPI 네트워크 통신 오류: MAPI 네트워크에서 더 이상 서버를 사용할 수 없습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단, 무손실이어야 함</p></td>
<td><p>없음 통신이 계속 시도됨</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>하드웨어 또는 소프트웨어 문제를 해결하여 통신 문제를 해결합니다.</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="odd">
<td><p>복제 네트워크 통신 오류: 오류가 발생한 복제 네트워크를 통해 서버가 하트비트, 로그 복사본 또는 시드를 수신할 수 없습니다.</p></td>
<td><p>작업이 다른 네트워크로 전환되는 동안 가능한 짧은 복사 또는 시드 중단</p></td>
<td><p>없음 통신이 계속 시도됨</p></td>
<td><p>없음</p></td>
<td><p>모두</p></td>
<td><p>하드웨어 또는 소프트웨어 문제를 해결하여 통신 문제를 해결합니다.</p></td>
<td><p>복구가 오류로 인해 영향을 받습니다.</p></td>
</tr>
<tr class="even">
<td><p>여러 네트워크 통신 오류: 여러 네트워크를 통해 서버가 하트비트, 로그 복사본 또는 시드를 수신할 수 없습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단, 무손실이어야 함</p></td>
<td><p>없음 통신이 계속 시도됨</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>하드웨어 또는 소프트웨어 문제를 해결하여 통신 문제를 해결합니다.</p></td>
<td><p>최소 하나의 네트워크가 여전히 작동합니다.</p></td>
</tr>
<tr class="odd">
<td><p>하나 이상의 네트워크의 부분 오류: 네트워크의 오류 비율이 높습니다.</p></td>
<td><p>검색된 오류 없음, 작업 없음</p></td>
<td><p>없음</p></td>
<td><p>탑재되었지만 가능한 성능 문제 있음</p></td>
<td><p>모두</p></td>
<td><p>하드웨어 또는 소프트웨어 문제를 해결하여 통신 문제를 해결합니다.</p></td>
<td><p>네트워크의 오류 비율이 정상보다 높습니다.</p></td>
</tr>
<tr class="even">
<td><p>검색되지 않은 운영 체제 중단: 운영 체제 응답이 중지되었지만 모니터링 또는 클러스터링을 통해 검색되지 않습니다.</p></td>
<td><p>없음</p></td>
<td><p>없음</p></td>
<td><p>모두</p></td>
<td><p>모두</p></td>
<td><p>응답하지 않는 리소스를 다시 시작하거나 종료합니다.</p></td>
<td><p>중단이 검색되지 않아 수행한 작업이 없습니다.</p>
<p>일부 기능이 작동할 수 있습니다.</p></td>
</tr>
<tr class="odd">
<td><p>운영 체제 드라이브에 오류가 발생했습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>드라이브 교체 및 서버 다시 작성 또는 RAID를 사용하여 볼륨 다시 작성</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="even">
<td><p>운영 체제 드라이브 공간이 부족합니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>수동으로 볼륨 공간 확보</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="odd">
<td><p>Exchange 이진 파일이 포함된 드라이브에 볼륨 또는 드라이브 오류가 발생했습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>드라이브 교체 및 응용 프로그램 다시 설치 또는 RAID를 사용하여 볼륨 다시 작성</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="even">
<td><p>Exchange 이진 파일을 포함하는 드라이브의 공간이 부족합니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>모두</p></td>
<td><p>수동으로 볼륨 공간 확보</p></td>
<td><p>해당 없음.</p></td>
</tr>
<tr class="odd">
<td><p>잘못된 새 로그 검색됨: 로그 시퀀스가 기존 파일에 의해 중단되었습니다.</p></td>
<td><p>자동 장애 조치(failover) 중 짧은 중단. 다른 복사본에 동일한 문제가 없다고 가정</p></td>
<td><p>없음</p></td>
<td><p>분리됨</p></td>
<td><p>실패</p></td>
<td><p>소스 확인 후 손상된 로그 제거</p></td>
<td><p>손상된 로그는 복제하면 안 됩니다.</p></td>
</tr>
<tr class="even">
<td><p>연속된 복제에서 잘못된 로그가 검색되었습니다. 복사 또는 재생 중 부적절한 로그가 검색됩니다.</p></td>
<td><p>해당 없음.</p></td>
<td><p>로그 삭제</p></td>
<td><p>해당 없음.</p></td>
<td><p>실패</p></td>
<td><p>잘못된 로그 무시, 영향을 받는 로그 스트림 이동</p></td>
<td><p>해당 없음.</p></td>
</tr>
</tbody>
</table>


## 데이터베이스 장애 조치(failover)

활성 상태인 데이터베이스 복사본이 더 이상 활성 상태를 유지할 수 없는 경우 데이터베이스 장애 조치(failover)가 발생합니다. 데이터베이스 장애 조치(failover)의 일부로 다음이 발생합니다.

1.  Microsoft Exchange 정보 저장소 서비스에 의해 데이터베이스 오류가 검색됩니다.

2.  Microsoft Exchange 정보 저장소 서비스가 오류 이벤트를 Crimson 채널 이벤트 로그에 기록합니다.

3.  오류가 있는 데이터베이스에 포함된 서버의 활성 관리자가 오류 이벤트를 검색합니다.

4.  활성 관리자가 데이터베이스의 복사본을 보유한 다른 서버의 데이터베이스 복사 상태를 요청합니다.

5.  다른 서버가 요청된 데이터베이스 복사본 상태를 요청한 활성 관리자에게 반환합니다.

6.  최상의 복사본 선택 알고리즘을 사용하여 PAM이 DAG의 다른 서버로 활성 데이터베이스 이동을 시작합니다.

7.  PAM이 선택한 서버를 참조하도록 클러스터 데이터베이스에 데이터베이스 탑재 위치를 업데이트합니다.

8.  PAM이 데이터베이스 마스터가 되도록 선택한 서버의 활성 관리자에게 요청을 보냅니다.

9.  선택한 서버의 활성 관리자는 Microsoft Exchange 복제 서비스가 이전 서버의 마지막 로그를 복사하고 데이터베이스에 대해 탑재 가능한 플래그를 설정하도록 요청합니다.

10. Microsoft Exchange 복제 서비스가 이전에 데이터베이스의 활성 복사본을 소유했던 서버의 로그를 복사합니다.

11. 활성 관리자가 클러스터 데이터베이스에서 최대 로그 생성 번호를 읽습니다.

12. Microsoft Exchange 정보 저장소 서비스가 새 활성 데이터베이스 복사본을 탑재합니다.

## 서버 장애 조치(failover)

서버 장애 조치(failover)는 DAG 구성원이 MAPI 네트워크에 더 이상 서비스를 제공할 수 없거나 DAG 구성원의 클러스터 서비스가 나머지 DAG 구성원에 더 이상 연결할 수 없는 경우 발생합니다. 서버 장애 조치(failover)의 일부로 다음이 발생합니다.

1.  PAM의 클러스터 서비스가 다음 상황 중 하나에 대한 알림을 PAM에 보냅니다.
    
    1.  **노드 작동 중단**   서버가 연결할 수는 있지만 DAG 작업에 참여할 수 없습니다.
    
    2.  **MAPI 네트워크 작동 중단**   서버가 MAPI 네트워크를 통해 연결할 수 없으며 그로 인해 DAG 작업에 참여할 수 없습니다.

2.  서버가 연결 가능한 경우 PAM은 영향 받는 서버의 활성 관리자에 연결하여 모든 데이터베이스를 즉시 분리하라고 요청합니다.

3.  영향을 받는 각 데이터베이스 복사본의 경우
    
    1.  PAM은 DAG의 모든 서버에게 데이터베이스 복사 상태를 요청합니다.
    
    2.  PAM은 연결 가능하고 활성 상태인 모든 DAG 구성원으로부터 응답을 받습니다.
    
    3.  PAM이 응답자 각각의 최신 로그 생성 번호를 쿼리하여 응답하는 모든 서버에서 가장 적합한 로그 원본을 결정합니다.
    
    4.  각 서버가 로그 생성 번호로 응답합니다.

4.  PAM이 클러스터 데이터베이스에서 현재 검색 인덱스 카탈로그 상태를 검색합니다.

5.  각 데이터베이스 복사본의 로그 생성 번호와 카탈로그 상태를 기반으로 PAM이 활성화하기 가장 적합한 복사본을 선택합니다.

6.  PAM이 클러스터 데이터베이스에 데이터베이스의 탑재된 위치를 업데이트합니다.

7.  PAM이 하나 이상의 다른 서버의 활성 관리자와 통신함으로써 데이터베이스 장애 조치(failover)를 시작합니다.

8.  선택한 서버의 활성 관리자는 Microsoft Exchange 복제 서비스가 이전 서버의 마지막 로그를 복사하고 탑재 가능한 플래그를 설정하도록 요청합니다.

9.  데이터베이스가 탑재 가능한 경우 서버의 활성 관리자가 데이터베이스를 탑재합니다.

활성 관리자의 최상의 복사본 선택 프로세스에 대한 자세한 내용은 [Active Manager](active-manager-exchange-2013-help.md)를 참조하십시오.

## 데이터 센터 장애 조치(failover)

Exchange 2013에서는 Exchange 2010 사이트 복구 구성의 문제를 해결하도록 다양한 부분이 변경되었습니다. 네임스페이스 단순화, 서버 역할 통합, 클라이언트 액세스 서버 및 DAG 복구의 분리(Exchange 2013에서는 네임스페이스를 DAG와 함께 이동할 필요가 없음), 부하 분산 변경 등을 통해 Exchange 2013은 단일 전역 네임스페이스 사용과 같은 새로운 사이트 복구 옵션이 제공됩니다. 또한 메시징 서비스 구성 요소를 배포할 위치가 2개 이상 있는 경우 Exchange 2013은 Exchange 2010에서는 수동 개입이 필요했던 장애에 대해 자동 장애 조치(failover)를 실행하도록 메시징 서비스를 구성하는 기능도 제공됩니다.

Exchange 2013에서는 사이트 복구를 간단히 작동할 수 있습니다. Exchange는 다중 IP 주소, 부하 분산(필요한 경우 서비스 실행 상태 및 서비스 중지 상태로 서버를 사용하는 기능)을 통해 네임스페이스에 기본 제공되는 내결함성을 활용합니다. Exchange 2013에서 변경된 기능 중 가장 중요한 것은 이름 확인 요청에 따라 DNS 서버에서 반환하는 여러 IP 주소를 캐시에 저장하는 클라이언트의 기능을 활용할 수 있다는 것입니다. 클라이언트가 여러 IP 주소를 캐시에 저장할 수 있어서(거의 모든 HTTP 클라이언트가 이렇게 할 수 있으며 Exchange 2013의 거의 모든 클라이언트 액세스 프로토콜이 HTTP 기반(Outlook, Outlook Anywhere, EAS, EWS, OWA, EAC, RPS 등)이므로 지원되는 모든 HTTP 클라이언트가 여러 IP 주소를 사용할 수 있음) 클라이언트 쪽에서 장애 조치(failover)가 제공될 경우, 이름 확인 중에 클라이언트에 여러 IP 주소를 전달하도록 DNS를 구성할 수 있습니다. 예를 들어 클라이언트는 mail.contoso.com에 요청하여 두 개 또는 네 개의 IP 주소를 받습니다. 그러나 클라이언트가 받는 많은 IP 주소는 클라이언트에 의해 안정적으로 사용됩니다. 따라서 IP 주소 중 하나가 실패하더라도 클라이언트는 하나 이상의 다른 IP 주소에 연결을 시도할 수 있으므로 안정성이 좋아집니다. 클라이언트는 하나의 IP 주소로 시도하여 실패할 경우 약 20초간 기다렸다가 목록의 다음 IP 주소로 다시 시도합니다. 따라서 기본 CAS 배열에서 연결이 끊어지고 또 다른 CAS 배열의 게시된 또 다른 IP 주소가 있는 경우 클라이언트 복구가 21초 정도 이내에 자동으로 진행됩니다.

최신 HTTP 클라이언트(10년 이내의 운영 체제 및 웹 브라우저)는 이러한 중복성을 자동으로 사용합니다. HTTP 스택은 FQDN에 대한 여러 IP 주소를 허용할 수 있으며 시도한 첫 번째 IP가 실패할 경우(예: 연결할 수 없음) 목록에 있는 다음 IP를 시도합니다. 장치가 패킷을 누락하고 있어 서비스 중지 상태로 사용되어야 하는 등의 일시적인 서비스 문제로 인해 세션 설정 이후에 연결이 손실된 경우에는 사용자가 브라우저를 새로 고치면 됩니다.

올바른 구성을 사용하면 장애 조치(failover)가 클라이언트 수준에서 자동으로 발생할 수 있으며, 클라이언트는 작동하는 클라이언트 액세스 서버가 있는 두 번째 데이터 센터로 자동 리디렉션됩니다. 또한 작동하는 클라이언트 액세스 서버는 통신을 다시 사용자의 사서함 서버로 프록시 처리하여 중단으로 인한 영향을 받지 않도록 합니다. 서비스 복구는 자체적으로 수행되므로 서비스 복구 작업을 수행하는 대신 실패한 부하 분산 장치를 교체하는 등 핵심 문제를 해결하는 데 초점을 맞출 수 있습니다.

데이터 센터 간 네임스페이스에 대한 장애 조치(failover)를 수행할 수 있기 때문에 데이터 센터 장애 조치(failover)에 필요한 것은 데이터 센터 간 사서함 역할의 장애 조치(failover)를 위한 메커니즘뿐입니다. DAG에 대한 자동 장애 조치(failover)를 수행하려면 DAG가 두 데이터 센터 간에 균등하게 분할되고, DAG 구성원이 포함된 데이터 센터 간의 네트워크 상태에 상관없이 두 데이터 센터의 DAG 구성원이 미러링 모니터 서버를 중재할 수 있도록 세 번째 위치에 이를 배치하는 솔루션을 구성합니다. 여기서 요점은 DAG 구성원이 포함된 위치에 영향을 주는 네트워크 오류로부터 세 번째 위치가 격리되는 것입니다.

두 데이터 센터만 있고 자동 장애 조치를 구성할 수 있도록 하려는 경우 세번째 위치도 Microsoft Azure을 활용할 수 있습니다. Azure 가상 네트워크를 만들고 다중 포인트 VPN을 사용 하 여 두 데이터 센터에 연결 해야 합니다. Microsoft Azure 가상 컴퓨터에 미러링 모니터 서버에 배치 됩니다. 자세한 내용은 [DAG 미러링 모니터 서버와 Microsoft Azure VM을 사용 하 여](using-a-microsoft-azure-vm-as-a-dag-witness-server-exchange-2013-help.md)을 참조 하십시오.

