---
title: 'Exchange 2013 페이지 비우기 이해: Exchange 2013 Help'
TOCTitle: Exchange 2013 페이지 비우기 이해
ms:assetid: 0ca7b188-efbc-4c0d-bcfe-5138cffc803c
ms:mtpsurl: https://technet.microsoft.com/ko-kr/library/Gg549096(v=EXCHG.150)
ms:contentKeyID: 61604700
ms.date: 05/22/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# Exchange 2013 페이지 비우기 이해

 

_**적용 대상:**Exchange Server 2013_

_**마지막으로 수정된 항목:**2016-12-09_

## Exchange 2013의 페이지 비우기

*비우기*는 삭제된 데이터 위에 0 또는 바이너리 패턴을 써서 삭제된 데이터를 더 복구하기 어렵게 만드는 보안 메커니즘입니다. Exchange Server 2013에서 ESE 데이터베이스는 저장 단위로 *페이지*를 사용하므로 *페이지 비우기*가 구현됩니다. 페이지 비우기는 기본적으로 사용되도록 설정되어 있으며 사용하지 않도록 설정할 수 없습니다. 페이지 비우기 작업은 트랜잭션 로그 파일에 기록되므로 모든 데이터베이스 복사본에서 유사한 방식으로 페이지 비우기가 수행됩니다. 활성 데이터베이스에서 페이지를 비우면 데이터베이스의 수동 복사본에서 해당 페이지가 비워집니다.


> [!NOTE]
> ESE(Extensible Storage Engine)에는 새 공간 할당보다 비워진 페이지 재이용이 우선되는 메커니즘이 없습니다. 순차적 공간 할당이 지정된 테이블은 새로운 또는 빈 순차적 페이지를 사용할 수 있도록 조각난 페이지 또는 비워진 페이지를 의도적으로 건너뜁니다. 이 방법을 사용하면 데이터베이스 IOP가 줄어듭니다.



Exchange 2013에서 페이지 비우기는 비우기 기능 수행 시 서버의 성능 저하를 줄여줍니다. 성능 저하를 줄여주는 방법에는 다음이 포함됩니다.

  - **최적화된 저장소 및 네트워크 용량**   ESE는 전체 페이지 이미지를 로깅하는 대신 트랜잭션 로그 파일에 페이지 비우기 레코드를 씁니다. 이 방법을 사용하면 로그 쓰기 I/O가 줄어들고 로그 파일 전달에 필요한 대역폭 요구 사항이 줄어듭니다.

  - **최적화 된 데이터베이스 디스크 입/출력**   Exchange 2010 RTM에서에서 및 이전 버전을 백업 하는 동안에 또는 예약 된 유지 관리 하는 동안 발생 한 페이지 비우기 및 중요 한 데이터베이스 디스크 I/O를 발생 시킨 합니다. Exchange 2010 SP1 및 Exchange 2013 ) (포함 이상 페이지 비우기 기본적으로 발생 하 고 트랜잭션 시간에 수행 되는 합니다. 대부분의 경우에서 비우기 발생 한 직후 발생 하드 삭제 합니다. 이 디자인을는 커밋되지 않은 페이지는 캐시에 남아 데이터베이스 일정량 시간에 대 한 추가 페이지 업데이트에서 발생 하는 시간 근접 추가 데이터베이스 쓰기 i/o가 발생 하지 않습니다를 닫을 수 있도록 보장 하는 엔진의 검사점 깊이가 기능을 활용 하 여 데이터베이스를 허용 합니다. 이 디자인으로 인해 페이지 비우기에 기본적으로 사용 하도록 설정 하는 이유는 한 I/O 미치는 영향을 크게 데이터베이스가 없습니다.

## ESE 데이터베이스에서 페이지 비우기 구현

페이지 비우기는 영구 삭제 레코드를 바이너리 패턴으로 덮어씁니다. 페이지 비우기 패턴은 ESE 엔진 작업과 관련되며 런타임 작업과 유지 관리 작업에서 각기 다릅니다. 다음 표에는 특정 런타임 작업에 해당하는 채우기 패턴이 나와 있습니다.

### ESE 런타임 동안 페이지 비우기의 채우기 패턴

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>ESE 런타임 작업</th>
<th>채우기 패턴</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>바꾸기</p></td>
<td><p>R</p></td>
</tr>
<tr class="even">
<td><p>레코드/Long 값 삭제</p></td>
<td><p>D</p></td>
</tr>
<tr class="odd">
<td><p>비운 페이지 공간</p></td>
<td><p>H</p></td>
</tr>
</tbody>
</table>


다음 표에는 ESE 백그라운드 데이터베이스 유지 관리 중에 발생하는 특정 작업에 해당하는 채우기 패턴이 나와 있습니다.

### ESE 백그라운드 데이터베이스 유지 관리 동안 페이지 비우기의 채우기 패턴

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>ESE 백그라운드 데이터베이스 유지 관리 작업</th>
<th>채우기 패턴</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>레코드 삭제</p></td>
<td><p>D</p></td>
</tr>
<tr class="even">
<td><p>Long 값 삭제</p></td>
<td><p>L</p></td>
</tr>
<tr class="odd">
<td><p>부분적으로 사용된 페이지의 비운 페이지 공간</p></td>
<td><p>Z</p></td>
</tr>
<tr class="even">
<td><p>사용되지 않은 페이지의 비운 페이지 공간</p></td>
<td><p>U</p></td>
</tr>
</tbody>
</table>


## 백그라운드 데이터베이스 유지 관리

백그라운드 데이터베이스 유지 관리는 계속해서 각 데이터베이스를 체크섬하고 검색하는 프로세스입니다. 기본 기능은 데이터베이스 페이지를 체크섬하는 것이지만 공간을 정리하고 저장소 크래시 때문에 비워지지 않은 레코드 및 페이지를 비우기도 합니다. 백그라운드 데이터베이스 유지 관리는 데이터베이스별로 초당 약 1MB를 처리합니다. 시기적절한 페이지 비우기가 중요한 경우 데이터베이스 크기를 줄여, 크래시 복구 시 더 짧은 시간(예: 24시간)에 페이지 비우기를 할 수 있습니다.

백그라운드 데이터베이스 유지 관리는 지속적인 프로세스이므로 시작 및 완료와 관련된 이벤트가 없습니다. 다음 성능 카운터 값을 읽어 백그라운드 데이터베이스 유지 관리 진행 상태를 추적할 수 있습니다.

  - MSExchange Database -\> Instances -\> Database Maintenance Duration

이 카운터는 지정된 데이터베이스에 대한 유지 관리가 마지막으로 완료된 이후 지난 시간(초)을 나타냅니다.

## ESE 데이터베이스 페이지 비우기의 프로세스

다음 표에서는 데이터베이스 삭제 시나리오 및 페이지 비우기 기능이 수행되는 시기에 대해 설명합니다.

### ESE 백그라운드 데이터베이스 유지 관리

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>데이터베이스 삭제 시나리오</th>
<th>데이터베이스 데이터를 비우기 위한 ESE 프로세스 및 시간대</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><ul>
<li><p>시나리오 1: 단일 항목 복구가 사용되지 않으며, 사용자가 복구할 수 있는 항목 폴더에서 항목을 제거합니다.</p></li>
<li><p>시나리오 2: 단일 항목 복구가 사용되지 않으며, 복구할 수 있는 항목 보존기간이 0으로 설정되어 있습니다.</p></li>
<li><p>시나리오 3: 단일 항목 복구가 사용되며, 삭제된 항목 보존 기간에 따라 항목이 만료됩니다.</p></li>
</ul></td>
<td><p>비동기 스레드는 삭제된 데이터를 바이너리 패턴으로 덮어씁니다. 이 작업은 레코드 삭제 후 몇 밀리초 이내에 발생합니다. 비동기 비우기 작업이 여전히 해결되지 않은 상태에서 저장소 프로세스가 크래시되는 경우(또는 버전 저장소 증가로 인해 버전 저장소 정리가 취소되는 경우) 백그라운드 데이터베이스 유지 관리가 데이터베이스의 해당 섹션을 처리할 때 비우기가 완료됩니다.</p></td>
</tr>
<tr class="even">
<td><p>보기 시나리오: Outlook/Outlook Web App 폴더 보기(예: 대화 보기)에서 항목의 만료</p></td>
<td><p>백그라운드 데이터베이스 유지 관리가 데이터베이스의 해당 섹션을 처리할 때 데이터 비우기가 발생합니다.</p></td>
</tr>
<tr class="odd">
<td><p>사서함 이동/사서함 삭제 시나리오: 원본 사서함 삭제(휴지통의 삭제된 사서함 만료)</p></td>
<td><p>백그라운드 데이터베이스 유지 관리가 데이터베이스의 해당 섹션을 처리할 때 데이터 비우기가 발생합니다.</p></td>
</tr>
</tbody>
</table>


## 페이지 비우기 동작 모니터링

다음 두 ESE 카운터를 확인하여 페이지 비우기 기능을 측정하고 모니터링할 수 있습니다.

  - MSExchange 데이터베이스 -\> 비워진 데이터베이스 유지 관리 페이지: 성능 카운터가 호출된 이후 데이터베이스 엔진에 의해 비워진 페이지 수를 나타냅니다.

  - MSExchange 데이터베이스 -\> 초당 비워진 데이터베이스 유지 관리 페이지: 페이지를 비우는 속도를 나타냅니다.


> [!NOTE]
> 이러한 카운터를 사용 하도록 설정 하는 방법을 알아보려면 <A href="https://go.microsoft.com/fwlink/p/?linkid=101194">Extended ESE 성능 카운터를 사용 하도록 설정 하는 방법</A>를 참조 하십시오.



페이지 비우기는 데이터베이스 유지 관리 기능이므로 런타임 트랜잭션에 대한 페이지 비우기 및 백그라운드 데이터베이스 유지 관리로 인한 페이지 비우기 모두와 관련된 성능 정보가 이러한 카운터에 포함됩니다.

## 페이지 비우기 없는 사서함 데이터 형식

다음 사서함 데이터 유형에는 페이지 비우기에 대한 프로비전이 없습니다.

  - 사서함 데이터베이스 트랜잭션 로그(.log)
    
    트랜잭션 로그가 삭제될 때(백업 또는 순환 로깅을 통한 자르기로 인해) 삭제된 로그 파일이 저장된 NTFS 파일 시스템의 블록을 비우는 프로세스는 없습니다. NTFS는 새로 만든 로그에 대한 해당 여유 공간을 신속하게 재이용할 수 있지만 실제로 재이용한다는 보장은 없습니다.

  - 콘텐츠 인덱스 카탈로그 파일
    
    Exchange 2013은 검색 인덱싱 기능에 Search Foundation을 사용합니다. 검색 인덱스 카탈로그는 사서함 데이터베이스 파일로서 동일한 볼륨에 저장된 수십 개의 파일로 구성되어 있습니다. 메시지가 사서함 데이터베이스에서 영구 삭제될 때 검색 카탈로그의 연결된 콘텐츠는 즉시 삭제되지 않습니다. 콘텐츠 삭제는 Search Foundation에서 여러 작은 카탈로그 파일을 큰 단일 파일로 섀도 또는 마스터 병합 처리할 때 발생합니다. 마스터 병합이 완료된 후 작은 카탈로그 파일은 삭제됩니다. 삭제된 카탈로그 파일이 저장된 블록을 비우는 프로세스는 없습니다.

